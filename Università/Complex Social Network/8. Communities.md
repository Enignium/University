Il caso del Belgio mostra come l‚Äôanalisi delle reti possa rivelare divisioni sociali nascoste. Blondel e i suoi studenti hanno studiato la rete delle chiamate mobili del paese, dove ogni persona era un nodo e i collegamenti rappresentavano chiamate regolari. 
Applicando un algoritmo di _community detection_, hanno scoperto due grandi cluster di individui che comunicavano quasi esclusivamente all‚Äôinterno del proprio gruppo linguistico: uno di francofoni e uno di fiamminghi. Questo indica che, pur condividendo lo stesso Stato, la societ√† belga √® formata da due comunit√† fortemente coese ma debolmente connesse tra loro.

![[Pasted image 20251102175259.png|500]]

L‚Äôimmagine rappresenta la struttura delle comunit√† belghe ricavata dallo studio delle **chiamate telefoniche mobili**

- Ogni nodo rappresenta una _comunit√†_ (cio√® un gruppo di persone che comunicano pi√π spesso tra loro).

- La dimensione del nodo √® proporzionale al numero di individui appartenenti a quella comunit√†.

- **Il colore** indica la **lingua predominante**:  

üî¥ rosso ‚Üí comunit√† francofone (Vallonia)  

üü¢ verde ‚Üí comunit√† fiamminghe (Fiandre)

Si notano **due grandi cluster** distinti, uno rosso e uno verde, con **pochissimi collegamenti tra loro**, a indicare che i due gruppi linguistici comunicano soprattutto al proprio interno. L‚Äôarea **centrale e intermedia**, in cui i nodi presentano colori misti (rosso-verde), rappresenta **Bruxelles**, una regione culturalmente pi√π ibrida dove le due lingue e culture **si intersecano maggiormente**. La rete sociale mostra **una chiara segregazione linguistica**, con una zona di transizione (Bruxelles) che funge da ponte tra le due grandi comunit√†.
### Zachary Karate Club

Il caso del _Zachary‚Äôs Karate Club_ rappresenta uno degli esempi pi√π noti nello studio delle comunit√† nelle reti sociali. Negli anni Settanta il sociologo Wayne Zachary analizz√≤ i rapporti tra trentaquattro membri di un club di karate, registrando le connessioni tra coloro che si frequentavano anche al di fuori dell‚Äôattivit√† sportiva. Quando un conflitto tra il presidente e l‚Äôistruttore port√≤ alla divisione del club in due gruppi distinti, questa separazione reale divenne la prova concreta dell‚Äôesistenza di due comunit√† interne gi√† presenti nella struttura delle relazioni. Studi successivi applicarono algoritmi di _community detection_ al grafo delle interazioni e mostrarono che era possibile individuare le due fazioni semplicemente osservando la topologia della rete. Il dataset divenne cos√¨ un riferimento fondamentale per testare nuovi metodi di identificazione delle comunit√†, guadagnando grande popolarit√† dopo il 2002 grazie ai lavori di Girvan e Newman. Da allora il ‚ÄúKarate Club‚Äù √® rimasto un simbolo della network science e persino oggetto di una curiosa tradizione accademica: chi lo cita per primo in una conferenza viene ironicamente accolto nello ‚ÄúZachary Karate Club Club‚Äù, ricevendo un trofeo che celebra il suo ruolo nella storia dello studio delle reti.

![[Pasted image 20251102175320.png|500]]

Dall'immagine vediamo che, nella figura a, c‚Äô√® la **rete sociale dei 34 membri** del _Zachary‚Äôs Karate Club_. Ogni nodo rappresenta una persona del club e ogni collegamento una relazione di amicizia o interazione fuori dal contesto sportivo. Le **forme geometriche** (cerchi e quadrati) indicano questi due gruppi reali, mentre i **colori** rappresentano le comunit√† individuate da un algoritmo che ottimizza la _modularit√†_, una misura che valuta quanto i nodi di una comunit√† siano pi√π connessi tra loro rispetto al resto della rete. Il risultato mostra che la partizione trovata dall‚Äôalgoritmo coincide quasi perfettamente con la divisione reale del club: i nodi bianchi e viola appartengono a una fazione, mentre i verdi e arancioni all‚Äôaltra. Nella figura b invece vediamo che lo studio venne ignorato per molti anni fino a quando inizi√≤ ad essere considerato come caso di test.

>[!danger] Ricorda
>Le comunit√† non sono solo un concetto sociale o tecnologico, ma rappresentano una chiave di lettura fondamentale anche per comprendere l‚Äôorganizzazione dei **sistemi biologici complessi**.  
Nelle reti cellulari, come quelle delle interazioni tra proteine o dei processi metabolici, **i nodi corrispondono a molecole (proteine, enzimi, geni)** e i **collegamenti rappresentano interazioni fisiche o funzionali**.
## Basi sulle comunit√†

I primi studi sulla struttura delle comunit√† nelle reti sociali avevano una visione **molto rigida** del concetto di comunit√†. Si definiva infatti una comunit√† come un **gruppo di individui in cui tutti conoscono tutti**.
### Clique

In termini di teoria dei grafi, questo corrisponde a una **clique**, cio√® un **sottografo completo**: ogni nodo √® collegato a tutti gli altri del gruppo. Le clique grandi per√≤ sono molto rare, le reti reali hanno piccoli nodi connessi. La realt√† inoltre √® pi√π sfumata, in una vera comunit√† non serve che ogni individuo conosca tutti, basta che ci sia un'alta densit√† di connessioni interne rispetto a quelle verso l'esterno.

![[Pasted image 20251102180544.png]]

In questo grafo per esempio la clique pi√π grande presente nella rete ha quattro nodi (un quadrato in cui tutte le coppie sono connesse). In altre parole, **non esistono gruppi di cinque o pi√π nodi** che siano tutti reciprocamente collegati.

![[Pasted image 20251102180819.png]]

Una community forte √® un **sottografo connesso** in cui **ogni nodo** ha **pi√π collegamenti interni che esterni**. Per cui: $$ k_{in} > k_{out}$$dove:

- $k_{in}$ = numero di connessioni del nodo con altri nodi della stessa comunit√†.

- $k_{out}$ = numero di connessioni del nodo con nodi esterni.

Ci√≤ significa che **ogni singolo nodo** ‚Äúpreferisce‚Äù restare all‚Äôinterno del proprio gruppo, poich√© la maggior parte dei suoi legami √® interna.

![[Pasted image 20251102181310.png]]

Una community debole √®  un **sottografo connesso** in cui **la somma complessiva** dei collegamenti interni di tutti i nodi **supera** la somma dei collegamenti esterni. Per cui: $$\sum k_{in} > \sum k_{out}$$
Non tutti i nodi devono rispettare la condizione individualmente, basta che **il gruppo nel complesso** sia pi√π connesso al proprio interno che verso l‚Äôesterno.

## Bisezione del grafo

Il problema della bisezione del grafo rappresenta la versione pi√π semplice del processo di individuazione delle comunit√† in una rete. Invece di cercare molti gruppi, l‚Äôobiettivo √® quello di dividere i nodi in due insiemi distinti in modo tale che i collegamenti tra i due gruppi siano il meno numerosi possibile. In termini formali, si tratta di minimizzare la _cut size_, cio√® il numero di archi che attraversano la divisione.

L‚Äôidea alla base √® intuitiva: se una rete contiene due comunit√† ben definite, la maggior parte delle connessioni dovrebbe trovarsi all‚Äôinterno di ciascun gruppo, mentre solo pochi collegamenti dovrebbero unire i due insiemi. La divisione ‚Äúmigliore‚Äù sar√† quindi quella che lascia il maggior numero di archi all‚Äôinterno dei gruppi e il minor numero possibile tra di essi.

In teoria, per risolvere esattamente il problema si potrebbero considerare tutte le possibili suddivisioni dei nodi in due gruppi e scegliere quella con la _cut size_ minima. Tuttavia, questo approccio √® praticamente irrealizzabile, perch√© il numero di combinazioni cresce in modo esponenziale con il numero di nodi della rete. Anche una rete di dimensioni moderate avrebbe un numero di possibili divisioni troppo grande per essere esplorato completamente.

Per questo motivo, il problema della bisezione del grafo √® importante soprattutto come punto di partenza concettuale.

### Costo computazionale

Il numero di modi distinti in cui una rete con $N$ nodi pu√≤ essere suddivisa in due gruppi di $N_1$ e $N_2$‚Äãnodi √® dato dalla formula combinatoria: $$\binom{N}{N_1} = \frac{N!}{(N-N_1)!*N_1!}=\frac{N!}{N_2!*N_1!}$$Per capire quanto il problema diventi rapidamente intrattabile, basta considerare il caso pi√π semplice. Una rete di soli **10 nodi**, divisa in due sottografi da **5 nodi ciascuno**, produce gi√† **252 possibili bisezioni** da analizzare per trovare quella con la _cut size_ minima. Pu√≤ sembrare gestibile, ma se si passa a una rete di **100 nodi**, suddivisa in due gruppi da **50 nodi**, il numero di combinazioni esplode a circa $10^{29}$. Un tale numero di configurazioni √® **impossibile da esplorare anche con i computer pi√π potenti**, il che dimostra che la ricerca esaustiva della divisione ottimale √® **computazionalmente proibitiva**.

![[Pasted image 20251102182843.png]]

Il grafico mostra l‚Äôandamento del **numero di Bell** $B_N$ (in viola) in funzione del numero di nodi $N$ di una rete, confrontato con la crescita esponenziale $e^N$ (linea nera).
Il **numero di Bell** $B_N$‚Äã rappresenta **il numero totale di modi in cui si possono partizionare $N$ oggetti in gruppi qualsiasi**, cio√® in un numero arbitrario di comunit√†, non solo due come nel caso della bisezione.  
In altre parole, mentre la bisezione cerca _una sola divisione in due gruppi_, i numeri di Bell contano **tutte le possibili suddivisioni** dei nodi in qualsiasi numero di comunit√†. Il numero di possibili modi di raggruppare i nodi di una rete cresce **pi√π che esponenzialmente** con $N$.
Cercare **tutte le possibili partizioni** per individuare la migliore (cio√® quella con la struttura di comunit√† ottimale) √® **computazionalmente impossibile** anche per reti relativamente piccole.
## Clastering gerarchico

Rileva la struttura di comunit√† all‚Äôinterno di reti molto grandi, mantenendo una **complessit√† polinomiale**, quindi gestibile anche per grafi estesi.  
L‚Äôidea di base √® costruire una **matrice di similarit√†** $x_{i,j}$‚Äã che misura quanto due nodi i e j siano ‚Äúvicini‚Äù o simili (ovvero quanto sia probabile che appartengano alla stessa comunit√†).
Una volta costruita, la matrice viene usata per **raggruppare iterativamente** i nodi che mostrano maggiore somiglianza. Esistono due approcci principali:

- **Algoritmi agglomerativi** ‚Üí uniscono nodi (o gruppi di nodi) con alta similarit√†, formando comunit√† sempre pi√π grandi.
- **Algoritmi divisivi** ‚Üí partono dalla rete completa e **rimuovono i collegamenti pi√π deboli o con bassa similarit√†**, isolando cos√¨ le comunit√†.

Il risultato finale √® un **dendrogramma**, cio√® un **albero gerarchico** che mostra la sequenza di fusioni o separazioni e aiuta a **identificare le possibili comunit√†** nel grafo.

Possiamo avere anche una solo comunit√†. Una sola comunit√† contiene pi√π comunit√† e cos√¨ via.
### Fasi principali del metodo agglomerativo (algoritmo di Ravasz)

Usiamo questo algoritmo per individuare comunit√† tramite clustering gerarchico:

1) Definire le somilglianze delle matrici

L‚Äôobiettivo di questa fase √® **quantificare quanto due nodi siano topologicamente simili**, cio√® quanto appartengano probabilmente alla stessa comunit√†.  
Per farlo, Ravasz introduce la **Topological Overlap Matrix (TOM)**, che misura la sovrapposizione dei vicini tra due nodi.

La formula generale √®: $$x'_{ij} = \frac{J(i, j)}{\min(k_{i}, k_{j}) + 1 - \Theta(A_{ij})}$$
dove: 
$J(i,j) \rightarrow$ numero di vicini comuni tra i nodi i e j;
$k_i, k_j \to$ gradi dei nodi i e j;
$A_{ij} \to$ elemento della matrice di adiacenza (1 se i e j sono collegati senn√≤ 0)
$\Theta(x) \to$  funzione di Heaviside in cui: $$\begin{cases}0,\ x\leq0 \\ 1,\ x>0 \end{cases}$$
- Se due nodi sono collegati e condividono molti vicini $\to x^{'}_{ij}$ √® grande $\to$ forte appartenenza alla comunit√†
- Se due nodi non hanno vicini in comune $\to J(i,j) = 0 \to x^{'}_{ij} = 0 \to$ nessuna similarit√†
- Il denominatore normalizza il valore in base al grado minore dei due nodi, per evitare che nodi con molti collegamenti abbiano automaticamente similarit√† pi√π alte.

2) Decidere il gruppo di somiglianza

Una volta che i nodi iniziano a fondersi in piccoli gruppi, il passo successivo √® **calcolare la similarit√† tra comunit√†** (non pi√π solo tra singoli nodi).

Il **principio** √® mantenere la coerenza gerarchica: quando due gruppi sono simili _in media_, si fondono per formare una comunit√† pi√π grande.

![[Pasted image 20251103095212.png|450]] 

3) Applicare il clustering gerarchico

Il metodo _agglomerativo_ di Ravasz segue un approccio **bottom-up**, cio√® parte dai singoli nodi e li unisce progressivamente in gruppi sempre pi√π grandi sulla base della loro similarit√†.

- **Inizializzazione** :
Ogni nodo √® considerato una comunit√† a s√© stante ‚Üí si calcola la matrice di similarit√† $x_{ij}$ per tutte le coppie di nodi.
- **Fusione delle comunit√† pi√π simili** :
Si identifica la **coppia con la similarit√† massima** e la si fonde in una singola comunit√†.
- **Aggiornamento delle similarit√†** :
Dopo ogni fusione, si **ricalcola la similarit√†** tra la nuova comunit√† e tutte le altre, usando la media delle $x_{ij}$‚Äã tra i nodi appartenenti ai gruppi considerati.
- **Iterazione fino alla fusione totale**  
Il processo viene ripetuto finch√© **tutti i nodi appartengono a un‚Äôunica comunit√†**, generando una **struttura gerarchica** di livelli intermedi (che rappresentano le comunit√† individuate a diverse scale).

4) Dendrogramma

 ![[Pasted image 20251103095637.png|500]]

- La figura a mostra come l‚Äôalgoritmo di Ravasz identifichi la struttura gerarchica delle comunit√† partendo dalla rete originale. Nella parte sinistra, i nodi sono collegati con pesi che rappresentano la similarit√† topologica calcolata con la topological overlap matrix. I nodi che appartengono alla stessa comunit√†, come A, B e C, hanno un valore di similarit√† pari a 1, segno di una connessione molto forte. Le connessioni tra gruppi diversi, come tra D e i nodi delle altre regioni, hanno invece valori pi√π bassi, intorno a 1/3, che indicano una somiglianza pi√π debole.

- La figura b, la matrice colorata visualizza questi valori di similarit√† tra tutte le coppie di nodi: i colori rossi indicano coppie con alta similarit√†, mentre i verdi corrispondono a valori bassi. Ai margini della matrice compare un dendrogramma che mostra come le comunit√† vengono fuse progressivamente. I nodi pi√π simili vengono uniti per primi e, man mano che la soglia di fusione si abbassa, le comunit√† diventano pi√π grandi. Tagliando il dendrogramma a un determinato livello, evidenziato dalla linea arancione, si ottengono tre comunit√† principali, che corrispondono alle tre regioni compatte visibili nella matrice.

_VA AGGIUNTA L'IMPLEMENTAZIONE IN PYTHON, L'HA MOSTRATA_
### Procedura divisiva (Algoritmo di Girvan-Newman)

L‚Äôapproccio divisivo adotta una logica opposta rispetto a quello agglomerativo: invece di unire nodi o gruppi simili, parte dalla rete intera e procede **rimuovendo sistematicamente i collegamenti** che tengono unite comunit√† diverse. L‚Äôobiettivo √® rompere progressivamente la rete fino a isolare gruppi di nodi internamente coesi ma debolmente connessi tra loro.

Il metodo pi√π famoso di questo tipo √® l‚Äô**algoritmo di Girvan‚ÄìNewman**, che si basa su due passaggi fondamentali. Il primo √® **definire una misura di centralit√†** capace di individuare i collegamenti pi√π ‚Äúcritici‚Äù, cio√® quelli che collegano nodi appartenenti a comunit√† differenti. Il secondo √® **applicare un processo di clustering gerarchico**, rimuovendo di volta in volta gli archi con la centralit√† pi√π alta e osservando come la rete si frammenta in sottoreti sempre pi√π piccole.
In questo modo, il processo inverso di fusione diventa una sequenza di separazioni, che produce anch‚Äôesso un dendrogramma ma basato sulla disconnessione progressiva della rete invece che sulla similarit√† tra nodi.

1) Definire la centralit√†

L‚Äôidea √® che i legami che uniscono nodi appartenenti a comunit√† diverse abbiano un ruolo cruciale nel mantenere la rete connessa, quindi devono essere identificati e rimossi per rivelare i confini tra le comunit√†.

Per questo motivo, $x_{ij}$‚Äã assume valori **alti** per le connessioni che attraversano comunit√† diverse e **bassi** per i legami interni a una stessa comunit√†. La misura pi√π utilizzata in questo contesto √® la **link betweenness**, cio√® il **numero di cammini minimi** che passano attraverso un dato arco (i,j). In pratica, pi√π percorsi brevi collegano due nodi lontani attraversando un certo collegamento, pi√π quel collegamento √® ‚Äúcentrale‚Äù nella rete. I collegamenti che si trovano tra comunit√† tendono quindi ad avere valori di betweenness molto elevati, perch√© costituiscono ponti indispensabili tra gruppi densi e separati. Al contrario, i collegamenti interni a una stessa comunit√† hanno valori di betweenness bassi, poich√© esistono molti altri percorsi alternativi all‚Äôinterno del gruppo. Rimuovendo progressivamente gli archi con centralit√† pi√π alta, la rete si frammenta in sottoreti che corrispondono alle comunit√† reali.

2) Processo di clustering gerarchico

- Una volta calcolate tutte le centralit√†, si **rimuove il collegamento con la centralit√† massima**. Se pi√π collegamenti condividono lo stesso valore massimo, se ne elimina uno a caso. Dopo ogni rimozione, la rete cambia struttura: alcuni nodi possono restare connessi, altri possono iniziare a separarsi.

- A questo punto si **ricalcolano le centralit√†** di tutti gli archi rimanenti, perch√© la topologia della rete si √® modificata. Poi si ripete il processo fino a quando tutti i collegamenti vengono rimossi.

Durante questa procedura, la rete si frammenta progressivamente in componenti sempre pi√π piccole, e il risultato pu√≤ essere rappresentato con un **dendrogramma** che mostra a quale livello di rimozione si formano le diverse comunit√†. In questo modo, il Girvan‚ÄìNewman non costruisce comunit√† unendo nodi simili, ma **rivelandole attraverso la disconnessione graduale** dei legami che le separano.

![[Pasted image 20251103102756.png|500]]

Nelle prime quattro figure (a‚Äìd) si osservano le fasi di eliminazione degli archi. In (a) la rete √® ancora intera, e l‚Äôarco con la **centralit√† pi√π alta**, quello che collega il gruppo superiore di nodi (A, B, C) con il resto della rete tramite D, viene rimosso per primo. Questa rimozione separa subito una piccola componente isolata. In (b) la centralit√† viene ricalcolata sul nuovo grafo: l‚Äôarco che unisce G e H risulta ora il pi√π centrale e viene eliminato, generando una seconda separazione. Le fasi successive (c) e (d) continuano nello stesso modo, togliendo via via i collegamenti pi√π ‚Äúcritici‚Äù finch√© la rete si suddivide in pi√π sottoreti compatte, ciascuna delle quali rappresenta una comunit√†.

A destra, il **dendrogramma (e)** visualizza il processo di disconnessione: ogni volta che un arco viene rimosso, la struttura dell‚Äôalbero si apre, mostrando come le comunit√† si separano a livelli diversi. Tagliando il dendrogramma lungo la linea orizzontale arancione si ottiene la suddivisione ottimale, in questo caso in tre comunit√† principali. 

Nel grafico (f) √® rappresentato l‚Äôandamento della **modularit√† ( M )** in funzione del numero di comunit√† ( n ). La modularit√† misura quanto la partizione ottenuta descrive bene la struttura comunitaria: cresce man mano che si formano gruppi ben definiti, raggiunge un **massimo** (qui per circa tre comunit√†) e poi decresce quando la rete viene eccessivamente frammentata.

_VA AGGIUNTA L'IMPLEMEMENTAZIONE IN PYTHON, L'HA MOSTRATA_
### Modularit√†

Misura **quanto una certa suddivisione di una rete in comunit√† sia significativa**. L‚Äôidea di base √® confrontare il numero di collegamenti effettivamente presenti all‚Äôinterno di ciascuna comunit√† con quello che ci si aspetterebbe di trovare se la rete fosse casuale.

Si considera una rete composta da N nodi e L collegamenti, suddivisa in $n_c$ comunit√†. Ogni comunit√† $C_c$ contiene $N_c$ nodi e $L_c$ collegamenti interni. Se il numero di collegamenti interni $L_c$ √® **maggiore** del numero atteso di collegamenti tra gli stessi nodi in una rete casuale di uguale densit√†, allora i nodi di $C_c$ formano una **vera comunit√†**.
In altre parole, la modularit√† quantifica **quanto la densit√† interna dei collegamenti di una comunit√† supera quella che si avrebbe per caso**.  
Un valore di modularit√† alto indica una struttura comunitaria ben definita, con molti legami interni e pochi esterni; un valore basso o nullo suggerisce invece che la divisione scelta non riflette una reale organizzazione interna della rete.

Per misurare quantitativamente quanto una comunit√† sia ben definita, si introduce la grandezza: $$M_c = \frac{1}{2L} \sum_{(i,j) \in C_c} (A_{ij} - p_{ij})$$
In cui:

- $A_{ij}$‚Äã √® l‚Äôelemento della **matrice di adiacenza**, uguale a 1 se i nodi i e j sono collegati e 0 altrimenti;

- p_{ij}‚Äã rappresenta la **probabilit√† attesa** che esista un collegamento tra i e j se la rete fosse casuale;

- L √® il numero totale di collegamenti della rete;

- la somma √® estesa a tutte le coppie di nodi appartenenti alla comunit√† $C_c$.

Il termine $(A_{ij}-p_{ij})$ misura la **differenza tra i collegamenti reali e quelli attesi** in un modello di rete casuale. Se i nodi di una comunit√† sono molto pi√π collegati del previsto, questa differenza sar√† positiva, contribuendo a un valore alto di modularit√†.

Nel caso di **reti casuali con distribuzione dei gradi fissata**, la probabilit√† che due nodi i e j siano collegati √® data da: $$p_{ij} = \frac{k_ik_j}{2L}$$
dove $k_i e k_j$ sono i **gradi** dei nodi, cio√® il numero di collegamenti di ciascuno. Questo modello tiene conto del fatto che nodi con molti collegamenti hanno naturalmente pi√π probabilit√† di essere connessi, anche per caso.